import{a as T,i as O,e as x,p as W,d as u,h as f,f as j,l as B,g as k,j as q,w as P,o as I,k as N,n as K,m as D,r as m,q as G,s as _,t as J,u as X,_ as Y,v as Z,x as ee,y as te,z as oe,A as ie,B as H,C as U}from"./index.e6440ab3.js";import{s as ne,g as ae,a as re,b as le,c as z,Q as A,d as se,e as L,p as ce}from"./firebase.0435990b.js";var ue=T({name:"QPageContainer",setup(e,{slots:d}){const{proxy:{$q:i}}=q(),o=O(B,x);if(o===x)return console.error("QPageContainer needs to be child of QLayout"),x;W(k,!0);const a=u(()=>{const r={};return o.header.space===!0&&(r.paddingTop=`${o.header.size}px`),o.right.space===!0&&(r[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(r.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(r[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),r});return()=>f("div",{class:"q-page-container",style:a.value},j(d.default))}});const{passive:V}=D,de=["both","horizontal","vertical"];var fe=T({name:"QScrollObserver",props:{axis:{type:String,validator:e=>de.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ne},emits:["scroll"],setup(e,{emit:d}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,a,r;P(()=>e.scrollTarget,()=>{h(),y()});function c(){o!==null&&o();const v=Math.max(0,re(a)),p=le(a),s={top:v-i.position.top,left:p-i.position.left};if(e.axis==="vertical"&&s.top===0||e.axis==="horizontal"&&s.left===0)return;const w=Math.abs(s.top)>=Math.abs(s.left)?s.top<0?"up":"down":s.left<0?"left":"right";i.position={top:v,left:p},i.directionChanged=i.direction!==w,i.delta=s,i.directionChanged===!0&&(i.direction=w,i.inflectionPoint=i.position),d("scroll",{...i})}function y(){a=ae(r,e.scrollTarget),a.addEventListener("scroll",l,V),l(!0)}function h(){a!==void 0&&(a.removeEventListener("scroll",l,V),a=void 0)}function l(v){if(v===!0||e.debounce===0||e.debounce==="0")c();else if(o===null){const[p,s]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];o=()=>{s(p),o=null}}}const{proxy:b}=q();return P(()=>b.$q.lang.rtl,c),I(()=>{r=b.$el.parentNode,y()}),N(()=>{o!==null&&o(),h()}),Object.assign(b,{trigger:l,getPosition:()=>i}),K}}),he=T({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:d,emit:i}){const{proxy:{$q:o}}=q(),a=m(null),r=m(o.screen.height),c=m(e.container===!0?0:o.screen.width),y=m({position:0,direction:"down",inflectionPoint:0}),h=m(0),l=m(G.value===!0?0:z()),b=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),v=u(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),p=u(()=>l.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${l.value}px`}:null),s=u(()=>l.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${l.value}px`,width:`calc(100% + ${l.value}px)`}:null);function w(t){if(e.container===!0||document.qScrollPrevented!==!0){const n={position:t.position.top,direction:t.direction,directionChanged:t.directionChanged,inflectionPoint:t.inflectionPoint.top,delta:t.delta.top};y.value=n,e.onScroll!==void 0&&i("scroll",n)}}function E(t){const{height:n,width:g}=t;let C=!1;r.value!==n&&(C=!0,r.value=n,e.onScrollHeight!==void 0&&i("scrollHeight",n),M()),c.value!==g&&(C=!0,c.value=g),C===!0&&e.onResize!==void 0&&i("resize",t)}function F({height:t}){h.value!==t&&(h.value=t,M())}function M(){if(e.container===!0){const t=r.value>h.value?z():0;l.value!==t&&(l.value=t)}}let S=null;const R={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:a,height:r,containerHeight:h,scrollbarWidth:l,totalWidth:u(()=>c.value+l.value),rows:u(()=>{const t=e.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}}),header:_({size:0,offset:0,space:!1}),right:_({size:300,offset:0,space:!1}),footer:_({size:0,offset:0,space:!1}),left:_({size:300,offset:0,space:!1}),scroll:y,animate(){S!==null?clearTimeout(S):document.body.classList.add("q-body--layout-animate"),S=setTimeout(()=>{S=null,document.body.classList.remove("q-body--layout-animate")},155)},update(t,n,g){R[t][n]=g}};if(W(B,R),z()>0){let g=function(){t=null,n.classList.remove("hide-scrollbar")},C=function(){if(t===null){if(n.scrollHeight>o.screen.height)return;n.classList.add("hide-scrollbar")}else clearTimeout(t);t=setTimeout(g,300)},$=function(Q){t!==null&&Q==="remove"&&(clearTimeout(t),g()),window[`${Q}EventListener`]("resize",C)},t=null;const n=document.body;P(()=>e.container!==!0?"add":"remove",$),e.container!==!0&&$("add"),J(()=>{$("remove")})}return()=>{const t=X(d.default,[f(fe,{onScroll:w}),f(A,{onResize:E})]),n=f("div",{class:b.value,style:v.value,ref:e.container===!0?void 0:a,tabindex:-1},t);return e.container===!0?f("div",{class:"q-layout-container overflow-hidden",ref:a},[f(A,{onResize:F}),f("div",{class:"absolute-full",style:p.value},[f("div",{class:"scroll",style:s.value},[n])])]):n}}});const ge={name:"MainLayout",data(){return{}},computed:{...Z({user:e=>e.user})},methods:{...ee({fetchUser:"fetchUser",decreaseCredits:"decreaseCredits",clearUser:"clearUser",applyCreditCode:"applyCreditCode"}),openLoginModal(){this.loginModalVisible=!0},openCreditModal(){this.creditModalVisible=!0},async loginWithGoogle(){try{const d=(await se(L,ce)).user;await this.fetchUser(d.uid),this.loginModalVisible=!1}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430:",e),alert("Login failed. Please try again.")}},async logout(){try{await L.signOut(),this.clearUser()}catch(e){console.error("Logout error:",e),alert("Logout failed. Please try again.")}},async applyCode(){try{const e=await this.$store.dispatch("applyCreditCode",this.creditCode);this.$q.notify({type:"positive",message:"Credits added successfully! "+e}),this.creditModalVisible=!1}catch(e){this.$q.notify({type:"negative",message:e.message})}},buyCredits(){}},created(){L.onAuthStateChanged(e=>{e&&this.fetchUser(e.uid)})}};function ve(e,d,i,o,a,r){const c=te("router-view");return oe(),ie(he,null,{default:H(()=>[U(ue,null,{default:H(()=>[U(c)]),_:1})]),_:1})}var ye=Y(ge,[["render",ve],["__scopeId","data-v-46a2bcca"]]);export{ye as default};
